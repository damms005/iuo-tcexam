(function(t){function e(e){for(var r,n,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)n=i[d],o[n]&&p.push(o[n][0]),o[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],r=!0,i=1;i<s.length;i++){var l=s[i];0!==o[l]&&(r=!1)}r&&(a.splice(e--,1),t=n(n.s=s[0]))}return t}var r={},o={app:0},a=[];function n(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=r,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/tcexam/admin/code/smart-omr/dist/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"557b":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var r=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex relative"},[s("div",{staticStyle:{width:"8%"}}),s("div",{staticStyle:{width:"95%"}},[s("div",{staticClass:"main-vue-app bg-grey-lightest rounded fixed w-4/5 pin-y overflow-visible m-5 border"},[s("uploader",{ref:"uploader",staticClass:"bg-grey-lightest",attrs:{showStartUpoadButton:t.showStartUpoadButton,showStartAllOver:t.showStartAllOver,showStopUpoadButton:t.showStopUpoadButton,serverStatusText:t.serverStatusText,startMarking:t.startMarking,main_holdin_container:t.current_main_holdin_container_class,showProgressHolder:t.realMarkingStartedSoShowProgressInFullscreen,showQuotes:t.showQuotes,current_bottom_main_grey_background_class:t.current_bottom_main_grey_background_class,current_bottom_green_background_class:t.current_bottom_green_background_class,current_progress_control_container_class:t.current_progress_control_container_class,current_progress_text_class:t.current_progress_text_class,current_spanprogresstext_class:t.current_spanprogresstext_class},on:{files_change:t.files_change,serverStatusText:t.updateServerStatus,alert:t.alert,_allUploadsCompleted:t._allUploadsCompleted,_showErrorThatTerminatesOngoingMarking:t._showErrorThatTerminatesOngoingMarking,_markingCompletedSuccessfully:t._markingCompletedSuccessfully,_startAllOver:t._startAllOver}})],1)]),t.showTestingGround?s("div",{staticClass:"bg-green-lightest rounded absolute pin-r m-5 min-h-full p-2 border text-xs",staticStyle:{width:"5%"}},[s("label",{staticClass:"block cursor-pointer p-1 mt-1"},[t._v("\n      All Uploads Successful\n      "),s("input",{attrs:{name:"status[]",type:"radio"},on:{click:function(e){return t.change_status(e)}}})]),s("label",{staticClass:"block cursor-pointer p-1 mt-1"},[t._v("\n      Show error\n      "),s("input",{attrs:{name:"status[]",type:"radio"},on:{click:function(e){return t.change_status(e)}}})]),s("label",{staticClass:"block cursor-pointer p-1 mt-1"},[t._v("\n      Marking completed successfully\n      "),s("input",{attrs:{name:"status[]",type:"radio"},on:{click:function(e){return t.change_status(e)}}})]),s("label",{staticClass:"block cursor-pointer p-1 mt-1"},[t._v("\n      Start All Over\n      "),s("input",{attrs:{name:"status[]",type:"radio"},on:{click:function(e){return t.change_status(e)}}})]),s("label",{staticClass:"block cursor-pointer p-1 mt-1"},[t._v("\n      Mimick server processing files status messages\n      "),s("input",{attrs:{type:"checkbox"},on:{click:t.toggleGeneratingLoremIpsum}})]),s("div",{staticClass:"p-1 m-1 mt-12 border rounded bg-black text-white",domProps:{innerHTML:t._s(t.status)}})]):t._e()])},a=[],n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:!t.isOption,expression:"!isOption"}],staticClass:"upload"},[r("div",{staticClass:"absolute w-full h-full"},[t.showUploadUI&&!t.files.length?r("div",[r("div",{staticClass:"dropbox text-center absolute p-5 w-full h-full"},[t._m(0),r("div",{directives:[{name:"show",rawName:"v-show",value:t.$refs.upload&&t.$refs.upload.dropActive,expression:"$refs.upload && $refs.upload.dropActive"}],staticClass:"drop-active mt-5"},[r("h3",{staticClass:"font-sans"},[t._v("Drop folder to upload")])])])]):t._e(),r("table",{staticClass:"mostly-customized-scrollbar drop-table overflow-auto h-full w-full pb-24 block absolute"},[r("thead",{directives:[{name:"show",rawName:"v-show",value:t.files.length,expression:"files.length"}]},[t._m(1)]),r("tbody",{},t._l(t.files,function(e,o){return r("tr",{key:e.id,staticClass:"font-mono text-sm hover:bg-blue-lighter cursor-pointer",class:{"bg-red-light":e.error&&"denied"!=e.error}},[r("td",[t._v(t._s(o+1))]),r("td",{staticClass:"whitespace-no-wrap"},[e.thumb?r("img",{attrs:{src:e.thumb,width:"40",height:"auto"}}):r("span",[t._v("No Image")])]),r("td",[r("div",{staticClass:"filename whitespace-no-wrap"},[t._v(t._s(e.name))]),e.active||"0.00"!==e.progress?r("div",{staticClass:"progress",attrs:{id:e.id}},[r("div",{class:{"progress-bar":!0,"progress-bar-striped":!0,"bg-green":100!=Number(e.progress),"bg-danger":e.error,"progress-bar-animated":e.active},style:{width:e.progress+"%"},attrs:{role:"progressbar"}},[t._v(t._s(e.progress)+"%")])]):t._e()]),r("td",{staticClass:"whitespace-no-wrap"},[t._v(t._s(t._f("formatSize")(e.size)))]),r("td",{staticClass:"whitespace-no-wrap"},[t._v(t._s(t._f("formatSize")(e.speed)))]),e.error?r("td",{staticClass:"whitespace-no-wrap"},[t._v("error: "+t._s(e.error))]):e.success?r("td",{staticClass:"whitespace-no-wrap"},[r("img",{attrs:{width:"25px",src:s("ffa6"),alt:""}})]):e.active?r("td",{staticClass:"whitespace-no-wrap"},[t._v("active")]):r("td",{staticClass:"whitespace-no-wrap"}),r("td",[r("div",{staticClass:"dropdown"},[r("button",{staticClass:"btn btn-secondary btn-sm dropdown-toggle",attrs:{type:"button"}},[t._v("Action")]),r("div",{staticClass:"dropdown-content"},[r("a",{class:{"dropdown-item":!0,disabled:!e.active},attrs:{href:"#"},on:{click:function(s){s.preventDefault(),e.active&&t.$refs.upload.update(e,{error:"cancel"})}}},[t._v("Cancel")]),e.active?r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.$refs.upload.update(e,{active:!1})}}},[t._v("Abort")]):e.error&&"compressing"!==e.error&&t.$refs.upload.features.html5?r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.$refs.upload.update(e,{active:!0,error:"",progress:"0.00"})}}},[t._v("Retry upload")]):e.success?t._e():r("a",{class:{"dropdown-item":!0,disabled:e.success||"compressing"===e.error},attrs:{href:"#"},on:{click:function(s){s.preventDefault(),!e.success&&"compressing"!==e.error&&t.$refs.upload.update(e,{active:!0})}}},[t._v("Upload")]),r("div",{staticClass:"dropdown-divider"}),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.$refs.upload.remove(e)}}},[t._v("Remove")])])])])])}),0)])]),r("div",{staticClass:"w-full"},[r("file-upload",{ref:"upload",staticClass:"w-full",attrs:{name:t.name,"post-action":t.postAction,extensions:t.extensions,accept:t.accept,multiple:t.multiple,directory:t.directory,size:t.size||0,thread:t.thread<1?1:t.thread>10?10:t.thread,headers:t.headers,drop:t.drop,"drop-directory":t.dropDirectory,"add-index":t.addIndex},on:{"input-filter":t.inputFilter,"input-file":t.inputFile},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t.filesAvailable,expression:"!filesAvailable"}],staticClass:"text-center p-5 mt-6"},[r("span",{staticClass:"cursor-pointer bg-red rounded p-2 text-white text-big"},[r("i",{staticClass:"fa fa-plus"}),t._v("\n          Select\n        ")])])])],1),r("transition",{attrs:{name:"main-grey-background","enter-class":"animated bounceInUp","enter-active-class":"animated bounceInUp","enter-to-class":"animated bounceInUp"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.filesAvailable,expression:"filesAvailable"}],staticClass:"main-bottom-container",class:t.greyMainBackground},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.showStartUpoadButton||t.showStartAllOver||t.showStopUpoadButton,expression:"showStartUpoadButton || showStartAllOver || showStopUpoadButton"}],staticClass:"relative w-1/6"},[r("transition-group",{attrs:{name:"action-buttons"}},[r("button",{directives:[{name:"show",rawName:"v-show",value:(t.showStartUpoadButton||t.enableResendUpload)&&(!t.$refs.upload||!t.$refs.upload.active)&&this.ongoingServerPollTimestamp&&this.reportedJobs.indexOf(this.ongoingServerPollTimestamp),expression:"\n            ( showStartUpoadButton || enableResendUpload )\n            && (!$refs.upload || !$refs.upload.active)\n            && ( this.ongoingServerPollTimestamp && this.reportedJobs.indexOf(this.ongoingServerPollTimestamp) )\n            "}],key:1,staticClass:"relative btn block w-32 h-6 m-1",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.doUpload(e)}}},[t._v("\n            "+t._s(t.allUploadsCompleted?"Re-Upload All":"Upload All")+"\n          ")]),r("button",{directives:[{name:"show",rawName:"v-show",value:t.showStartAllOver&&t.$refs.upload&&t.$refs.upload.uploaded,expression:" showStartAllOver && ( $refs.upload && $refs.upload.uploaded ) "}],key:2,staticClass:"relative btn block w-32 h-6 m-1",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.startAllOver(e)}}},[t._v("\n            Start All Over\n          ")]),r("button",{directives:[{name:"show",rawName:"v-show",value:t.showStopUpoadButton&&t.$refs.upload&&t.$refs.upload.active,expression:"showStopUpoadButton && ($refs.upload && $refs.upload.active) "}],key:3,staticClass:"relative btn button block w-32 h-6 m-1",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.stopUploads(e)}}},[t._v("\n            Stop Upload\n          ")])])],1),r("transition",[t.showGreenWorkingBackground?r("div",{staticClass:"animateAll green-working-background",class:t.greenWorkingBackground},[r("transition",[t.displayLoadingImage?r("img",{staticClass:"inline self-center",attrs:{width:"70px",src:s("a72f")}}):t._e()]),r("div",{staticClass:"animateAll self-center",class:t.main_holdin_container},[r("transition",{attrs:{mode:"in-out",appear:""}},[r("div",{staticClass:"progress_text_holder",class:t.current_progress_text_class},[r("span",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],key:"serverStatusText",staticClass:"progress_text",class:t.current_spanprogresstext_class,domProps:{innerHTML:t._s(t.serverStatusText)}})])]),r("div",{staticClass:"relative w-full flex main-progress-area-holder flex-col"},[r("transition",[t.showPercentageCompletion?r("div",{staticClass:"animateAll mt-16 w-full h-full pin-x self-center text-center absolute font-sans font-bold text-3xl"},[t._v(t._s(t.markingPercentageProgress)+"%")]):t._e()]),t.showProgressHolder?r("div",{class:t.current_progress_control_container_class},[r("div",{staticClass:"-ml-12 self-center absolute circle-loader",class:t.morphable_LoadingClass},[t.showCompletionCheckmark?r("div",{staticClass:"checkmark draw"}):t._e()])]):t._e(),t.showQuotes?r("div",{staticClass:"h-auto relative flex text-white w-full"},[r("quotes",{attrs:{base_path_url:t.base_path_url}})],1):t._e(),t.showFinalStatus?r("div",{staticClass:"self-center report relative"},[r("div",[t._v("\n                  Total scripts marked:\n                  "),r("span",{staticClass:"label m-1 inline-block"},[t._v("124")])]),r("div",[t._v("\n                  Total units used:\n                  "),r("span",{staticClass:"label m-1 inline-block"},[t._v("103")])]),r("div",[t._v("\n                  Total units left:\n                  "),r("span",{staticClass:"label m-1 inline-block"},[t._v("433")])])]):t._e()],1)],1)],1):t._e()])],1)])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h4",[s("span",{staticClass:"bg-white p-10"},[t._v("\n            Drop folder to upload\n            "),s("code",[t._v("\n              (recommended:\n              "),s("span",{staticClass:"rounded bg-grey-light p-2"},[t._v("300PPI jpeg")]),t._v(" format)...\n            ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"bg-pink-light w-full font-sans"},[s("th",[t._v("#")]),s("th",[t._v("Thumbnail")]),s("th",[t._v("Name")]),s("th",[t._v("Size")]),s("th",[t._v("Speed")]),s("th",[t._v("Status")]),s("th",{staticClass:"w-full"},[t._v("Action")])])}],l=s("75fc"),c=(s("7f7f"),s("c5f6"),s("28a5"),s("6b54"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"absolute flex quotes-main-component w-full h-full"},[s("div",{directives:[{name:"show",rawName:"v-show",value:this.show_quote,expression:"this.show_quote"}],staticClass:"absolute inline-block h-48 mt-2 w-full"},[s("blockquote",{staticClass:"flex flex-col justify-center"},[s("transition",{attrs:{"enter-active-class":"animated fadeIn fast","leave-active-class":"animated fadeOut faster",mode:"out-in"}},[s("div",{staticClass:"quotation flex-1 tracking-wide text-center"},[s("span",{key:t.quote.quote,staticClass:"pl-6 font-sans text-sm font-hairline"},[t._v("\n            "+t._s(t.quote.quote)+"\n          ")])])]),s("div",{staticClass:"self-center block pin-r mr-2 mt-6 leading-loose"},[s("div",{staticClass:"relative flex"},[s("div",{staticClass:"mt-1 pin-y inline absolute opacity-50 p-1 w-6 h-6",attrs:{id:"progressbar"}}),s("div",{staticClass:"inline ml-8 pin-y author italic text-xs font-bold tracking-wide"},[s("span",{staticClass:"font-heavy text-heavy"},[t._v("‐")]),s("transition",{attrs:{"enter-active-class":"animated fadeIn fast","leave-active-class":"animated fadeOut faster",mode:"out-in"}},[s("span",{key:t.quote.author},[t._v("\n                    "+t._s(t.quote.author)+"\n                  ")])])],1)])])],1)])])}),u=[],d=s("432f"),p=s.n(d),h={props:["base_path_url"],data:function(){return{available_quotes:[],quote:"",quotes_change_interval:7e3,show_quote:!0,quotesBarWidth:0,count:0,ongoingTimeout:0,progressbar:null}},computed:{},mounted:function(){this.progressbar=new p.a.Circle("#progressbar",{strokeWidth:9,easing:"linear",duration:1e3,color:"grey",trailColor:"",trailWidth:0,svgStyle:null,fill:null,warnings:!0})},created:function(){this.get_quotes_from_db(),this.displayNextQuote()},methods:{displayNextQuote:function(){if(this.available_quotes.length>0){this.available_quotes.length<20&&this.get_quotes_from_db();var t=this.available_quotes.pop(),e=t.quote.split(" ").length,s=Math.floor(e/2)+2;this.quote=t;var r=100/s;this.quotesBarWidth=0,this.progressbar.set(0),this.incrementQuoteWidth(r);var o=this;setTimeout(function(){o.ongoingTimeout&&clearTimeout(o.ongoingTimeout),o.displayNextQuote()},1e3*s)}else{o=this;setTimeout(function(){o.displayNextQuote()},1e3)}},incrementQuoteWidth:function(t){if(this.quotesBarWidth+=t,this.progressbar.animate(this.quotesBarWidth/100),this.quotesBarWidth+t<=100){var e=this;this.ongoingTimeout=setTimeout(function(){e.incrementQuoteWidth(t)},1e3)}},retry_ajax_request:function(t){t.retry++,t.retry<10&&(t.open("GET",t.url,!0),t.send())},get_quotes_from_db:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this;null==t&&(t=new XMLHttpRequest,t.url="".concat(this.base_path_url,"/tce_quotes.php"),t.open("GET",t.url,!0),t.retry=1),t.onreadystatechange=function(){if(4==t.readyState)if(200==t.status)try{e.available_quotes=Object(l["a"])(JSON.parse(t.responseText))}catch(s){console.log(s),console.log(t),e.retry_ajax_request(t)}else console.log(t),console.log(t.status),e.retry_ajax_request(t)},t.send("foo=bar&lorem=ipsum")}}},_=h,g=(s("86d0"),s("2877")),m=Object(g["a"])(_,c,u,!1,null,null,null),f=m.exports,v=s("8019"),b=s.n(v);r["a"].filter("formatSize",function(t){return t>1099511627776?(t/1024/1024/1024/1024).toFixed(2)+" TB":t>1073741824?(t/1024/1024/1024).toFixed(2)+" GB":t>1048576?(t/1024/1024).toFixed(2)+" MB":t>1024?(t/1024).toFixed(2)+" KB":t.toString()+" B"});var w={components:{FileUpload:b.a,Quotes:f},props:["showStartUpoadButton","showStartAllOver","showStopUpoadButton","startMarking","serverStatusText","current_progress_control_container_class","current_bottom_main_grey_background_class","current_bottom_green_background_class","current_progress_text_class","current_spanprogresstext_class","main_holdin_container","showProgressHolder","showQuotes"],data:function(){return{files:[],filesAvailable:!1,quotes:[],show_quote:!0,accept:"image/png,image/gif,image/jpeg",extensions:"jpg,jpeg,png",server_script_path:"tce_import_omr_answers_bulk_smart_processor.php",status_upgrade_script_path:"tce_import_omr_answers_bulk_smart_processor_status.php",minSize:1024,size:52428800,multiple:!0,computationOngoin:!1,directory:!1,drop:!0,dropDirectory:!0,addIndex:!1,thread:10,name:"omrfile",headers:{},autoCompress:1048576,uploadAuto:!1,isOption:!1,addData:{show:!1,name:"",type:"",content:""},editFile:{show:!1,name:""},lasyYScroll:void 0,ongoingServerPollTimestamp:void 0,currentMarkingSessionAbortedWithError:!1,reportedJobs:[],intervalQueryStatus:7e3,showUploadUI:!0,displayLoadingImage:!0,showLoadingMode:!1,showPercentageCompletion:!1,showCompletionCheckmark:!1,showFinalStatus:!1,showGreenWorkingBackground:!1,recentMarkingSessionCompletedSuccessfully:!1,isMounted:!1,markingPercentageProgress:1,succcessfullyCompletedMarkingSessionsCounter:0,commandedServerToStartMarking:!1,current_working_backround_class:{}}},mounted:function(){this.$nextTick(function(){this.ongoingServerPollTimestamp=(new Date).getTime(),this.isMounted=!0})},computed:{base_path_url:function(){if(window.location.href.indexOf(".php")>=0){var t=window.location.href.split("/");return t.pop(),t.join("/")}return"http://localhost/git-collaborations/tcexam/admin/code/"},enableResendUpload:function(){return this.files&&this.files.length>0},succcessfullyCompletedMarkingSessions:function(){return!(!this.$refs.upload||!this.$refs.upload.uploaded)&&this.succcessfullyCompletedMarkingSessionsCounter},postAction:function(){return"".concat(this.base_path_url,"/tce_import_omr_answers_bulk_smart_processor.php")},allUploadsCompleted:function(){return!!this.isMounted&&(this.$refs.upload&&this.$refs.upload.uploaded&&this.files.length>0)},isCurrentlyUploading:function(){return!!this.isMounted&&this.$refs.upload.active},isMarkingOngoing:function(){return!!this.isMounted&&(!this.$refs.upload.active&&this.commandedServerToStartMarking&&!this.currentMarkingSessionAbortedWithError)},morphable_LoadingClass:function(){return this.showLoadingMode?{"load-complete":!1}:{"load-complete":!0}},greenWorkingBackground:function(){return this.current_bottom_green_background_class},greyMainBackground:function(){return this.current_bottom_main_grey_background_class}},watch:{allUploadsCompleted:function(t,e){if(t){this.sendServerUploadsCompletedMessage();for(var s=this.files.length-1;s>=0;s--)if(this.files[s].error)return this.currentMarkingSessionAbortedWithError=!0,this.$emit("serverStatusText",null),void this.$emit("alert","You have file(s) with error. Please check the files you added for marking and try again",1)}},"addData.show":function(t){t&&(this.addData.name="",this.addData.type="",this.addData.content="")},startMarking:function(){this.doUITransitionToStartMarking()},showLoadingMode:function(){this.showCompletionCheckmark=!this.showLoadingMode,this.showPercentageCompletion=this.showLoadingMode},files:function(){this.$emit("files_change",this.files),this.filesAvailable=this.files&&this.files.length>0,this.showOrHideGreenWorkingBackground()},serverStatusText:function(){this.showOrHideGreenWorkingBackground()},isCurrentlyUploading:function(t,e){t?0==!!this.ongoingServerPollTimestamp&&(this.ongoingServerPollTimestamp=(new Date).getTime(),this.start_polling_server_for_status_updates()):this.$refs.upload&&this.$refs.upload.uploaded&&this.files.length>0&&this.ongoingServerPollTimestamp&&this.start_polling_server_for_status_updates(null,!0,Number(this.ongoingServerPollTimestamp))}},methods:{stopUploads:function(){try{this.$refs.upload.active=!1}catch(t){}this.$emit("serverStatusText","")},doUpload:function(){if(this.currentMarkingSessionAbortedWithError=!1,this.displayLoadingImage=!0,this.allUploadsCompleted){if(this.$refs.upload&&this.$refs.upload.uploaded&&this.files.length>0)for(var t=this.files.length-1;t>=0;t--)this.$refs.upload.update(this.files[t],{active:!0,error:"",success:!1,progress:"0.00"});this.$refs.upload.active=!0,this.$emit("serverStatusText","Uploading files to server...")}else this.$refs.upload.active=!0,this.$emit("serverStatusText","Uploading files to server...")},handle_server_status_message:function(t,e){var s=t.substr(0,2),r=":"==t[1]?t.substr(2):t;if("s:"==s)try{var o=JSON.parse(r);o.marking_completed_successfully?(this.$emit("_markingCompletedSuccessfully"),this.displayLoadingImage=!1,this.ongoingServerPollTimestamp=void 0):(this.$emit("serverStatusText",o.status_text),this.markingPercentageProgress=o.percentage_progress)}catch(a){this.reportErrorAsAlertPopoup("Error occured: ".concat(a," (").concat(r,")"))}else this.ongoingServerPollTimestamp=void 0,this.reportErrorAsAlertPopoup(r)},reportErrorAsAlertPopoup:function(t){this.ongoingServerPollTimestamp=void 0,this.currentMarkingSessionAbortedWithError=!0,this.commandedServerToStartMarking=!1,this.$emit("_showErrorThatTerminatesOngoingMarking",t),this.displayLoadingImage=!1},startAllOver:function(){this.$emit("_startAllOver",null)},showOrHideGreenWorkingBackground:function(){this.showGreenWorkingBackground=this.isCurrentlyUploading||void 0!=this.serverStatusText&&this.serverStatusText.length>0,this.showGreenWorkingBackground},inputFilter:function(t,e,s){if(t&&!e&&/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(t.name))return s();if(t&&(!e||t.file!==e.file)){t.blob="";var r=window.URL||window.webkitURL;r&&r.createObjectURL&&(t.blob=r.createObjectURL(t.file)),t.thumb="",t.blob&&"image/"===t.type.substr(0,6)&&(t.thumb=t.blob)}},inputFile:function(t,e){if(0==!!this.ongoingServerPollTimestamp&&(this.ongoingServerPollTimestamp=(new Date).getTime()),t&&void 0==e){var s={job_id:this.ongoingServerPollTimestamp,total_number_files:this.files?this.files.length:0,filename:t.name,error:"true"};this.$refs.upload.update(t,{data:s})}if(t&&e){if(t.active&&!e.active&&t.size>=0&&this.minSize>0&&t.size<this.minSize&&this.$refs.upload.update(t,{error:"size"}),t.progress!==e.progress&&Number(t.progress),t.error&&e.error,t.success&&e.success,t&&e&&!t.active&&e.active&&t.xhr&&t.response)if(t.response.indexOf("will start marking")>=0)this.ongoingServerPollTimestamp&&-1==this.reportedJobs.indexOf(this.ongoingServerPollTimestamp)&&(this.reportedJobs.push(this.ongoingServerPollTimestamp),this.commandedServerToStartMarking=!0,this.$emit("_allUploadsCompleted"),this.sendServerCommand("startProessingUploadedScripts"),console.log("server now commanded"));else if(t.response.indexOf("expecting more data")>=0);else{var r=document.createElement("div");r.innerHTML=t.response,-1==t.response.indexOf("concurrent marking session prevented")&&console.error("Error: ",r.textContent||r.innerText||"",t.xhr)}var o=document.getElementById(t.id);o&&o.scrollIntoView()}!t&&e&&(e.response,e.success&&e.response.id),Boolean(t)===Boolean(e)&&e.error===t.error||this.uploadAuto&&!this.$refs.upload.active&&(this.$refs.upload.active=!0)},doUITransitionToStartMarking:function(){this.$parent.doUITransition("All Uploads Successful")},get_quotes_from_db:function(){var t=this,e=new XMLHttpRequest;e.url="".concat(this.base_path_url,'/tce_quotes.php"'),e.open("GET",e.url,!0),e.retry=1,e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status)try{var s=Object(l["a"])(JSON.parse(e.responseText));t.quotes.splice(0,0,s)}catch(r){console.log(r),console.log(e)}else console.log(e),console.log(e.status),this.retry++,this.retry<10&&(this.open("GET",e.url,!0),this.send())},e.send("foo=bar&lorem=ipsum")},start_polling_server_for_status_updates:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this;null==t&&(t=new XMLHttpRequest,t.url="".concat(this.base_path_url,"/").concat(this.status_upgrade_script_path),t.retry=1,t.ongoingServerPollTimestamp=this.ongoingServerPollTimestamp,t.isFinalRequest=e),t.onreadystatechange=function(){if(4==t.readyState)if(200==t.status)try{if(r.currentMarkingSessionAbortedWithError)return;t.ongoingServerPollTimestamp==r.ongoingServerPollTimestamp||0==!!r.ongoingServerPollTimestamp?(t.responseText.length>1&&r.handle_server_status_message(t.responseText,t.ongoingServerPollTimestamp),t.ongoingServerPollTimestamp&&t.ongoingServerPollTimestamp==r.ongoingServerPollTimestamp&&setTimeout(function(){r.start_polling_server_for_status_updates(t)},r.intervalQueryStatus)):e&&r.handle_server_status_message(t.responseText,t.ongoingServerPollTimestamp)}catch(s){console.log(s),console.log(t)}else console.log(t),console.log(t.status),this.retry++,this.retry<3&&t.ongoingServerPollTimestamp==r.ongoingServerPollTimestamp&&r.start_polling_server_for_status_updates(t)},t.open("POST",t.url,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("getStatus=true&job_id=".concat(s||this.ongoingServerPollTimestamp,"&isFinalRequest=").concat(!!e))},sendServerUploadsCompletedMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this;null==t&&(t=new XMLHttpRequest,t.url="".concat(this.base_path_url,"/").concat(this.server_script_path),t.retry=1,t.sentData="all_available_files_uploaded=true&job_id=".concat(this.ongoingServerPollTimestamp)),t.onreadystatechange=function(){4==t.readyState&&(200==t.status||(console.log(t),console.log(t.status),this.retry++,this.retry<10&&e.sendServerUploadsCompletedMessage(t)))},t.open("POST",t.url,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(t.sentData)},sendServerCommand:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this;if(null==e){var r="",o="";switch(t){case"startProessingUploadedScripts":r="startProessingUploadedScripts=true&job_id="+this.ongoingServerPollTimestamp,o="?startmarking=true";break}e=new XMLHttpRequest,e.url="".concat(this.base_path_url,"/").concat(this.server_script_path).concat(o),e.sentData=r,e.retry=1}e.onreadystatechange=function(){4==e.readyState&&(200==e.status||(console.log(e),console.log(e.status),this.retry++,this.retry<10&&s.sendServerCommand(t,e)))},e.open("POST",e.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(e.sentData)}}},k=w,S=(s("d045"),Object(g["a"])(k,n,i,!1,null,null,null)),y=S.exports,x=s("cc86"),C=s.n(x),T=s("3d20"),M=s.n(T),U={components:{Uploader:y},data:function(){return{showTestingGround:!1,files:[],accept:"image/png,image/gif,image/jpeg,image/pdf,doc/pdf",extensions:"gif,jpg,jpeg,png,webp,pdf",minSize:1024,size:10485760,multiple:!0,directory:!1,drop:!0,dropDirectory:!0,addIndex:!1,thread:3,name:"file",postAction:"/upload/post",headers:{"X-Csrf-Token":"xxxx"},data:{_csrf_token:"xxxxxx"},autoCompress:1048576,uploadAuto:!1,isOption:!1,addData:{show:!1,name:"",type:"",content:""},editFile:{show:!1,name:""},status:"...",showStartUpoadButton:!0,showStartAllOver:!0,realMarkingStartedSoShowProgressInFullscreen:!1,showQuotes:!0,showStopUpoadButton:!0,serverStatusText:"",startMarking:!0,startMimickingServerSentStatus:!0,mimickeryIntervalReference:null,current_bottom_main_grey_background_class:"",bottom_main_grey_background_class:{"-bottom_main_grey_background_class_not_shown bg-grey-light pin-b absolute h-0 opacity-0 w-full flex justify-center":!0},bottom_main_grey_background_class_slide_up:{"-bottom_main_grey_background_class_slide_up bg-grey-light p-2 pin-b absolute h-24 w-full flex justify-center":!0},bottom_main_grey_background_class_start_marking_class_fullscreen:{"-bottom_main_grey_background_class_start_marking_class_fullscreen bg-grey-light p-2 pin-b absolute h-full w-full flex justify-center":!0},current_bottom_green_background_class:"",bottom_green_background_class:{"-bottom_green_background_class border rounded p-4 bg-green-lightest flex w-5/6":!0},bottom_green_background_start_uploading_class:{"-bottom_green_background_start_uploading_class animateAll relative h-full justify-left border rounded p-4 bg-green-lightest flex w-3/4":!0},bottom_green_background_class_start_marking_class:{"-bottom_green_background_class_start_marking_class animateAll relative h-full justify-center border rounded p-4 bg-green-lightest flex w-3/4":!0},current_main_holdin_container_class:"",main_holdin_container_class:{"-main_holdin_container_class rounded self-center text-grey-dark relative overflow-hidden w-auto ml-16 p-2 h-34":!0},main_holdin_container_start_marking_class:{"-main_holdin_container_start_marking_class rounded self-center text-grey-dark relative overflow-hidden w-full p-2 h-full":!0},current_progress_control_container_class:"",progress_control_container_class:{"-ml-2 mt-6 w-full h-32 block pin-x pin-y self-center text-center relative progress-control-container":!0},progress_control_container_start_marking_class:{"-ml-2 mt-6 w-32 h-32 block pin-x pin-y self-center text-center relative progress-control-container":!0},current_progress_text_class:"",progress_text_class:{},progress_text_start_marking_class:{"-progress_text_start_marking_class serverStatusText flex justify-center text-center inline-block self-center w-full h-10 asolute overflow-hidden":!0},current_spanprogresstext_class:"",spanprogresstext_class:{"-spanprogresstext_class inline-block self-center relatvie tracking-wide text-xs p-2 font-bold text-blue-darker border rounded":!0},spanprogresstext_start_marking_class:{"-spanprogresstext_start_marking_class inline-block self-center relatvie tracking-wide text-xs bg-red-light p-2 font-bold text-white rounded":!0}}},watch:{"addData.show":function(t){t&&(this.addData.name="",this.addData.type="",this.addData.content="")}},created:function(){this.current_main_holdin_container_class=this.main_holdin_container_class,this.current_progress_control_container_class=this.progress_control_container_class,this.current_bottom_main_grey_background_class=this.bottom_main_grey_background_class,this.current_bottom_green_background_class=this.bottom_green_background_start_uploading_class,this.current_progress_text_class=this.progress_text_class,this.current_spanprogresstext_class=this.spanprogresstext_class},methods:{updateServerStatus:function(t){this.serverStatusText=t},alert:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=["warning","error","success","info","question"];null==s&&(s=r.length>e?r[e]:"Information",s="".concat(s[0].toUpperCase()).concat(s.substr(1))),M.a.fire(s,String(t),e>r.length?0:r[e])},_allUploadsCompleted:function(){this.realMarkingStartedSoShowProgressInFullscreen=!0,this.serverStatusText="All uploads successful. Now marking the scripts...",this.$refs.uploader.showLoadingMode=!0,this.showQuotes=!0,this.$refs.uploader.showFinalStatus=!1,this.showStartUpoadButton=!1,this.showStartAllOver=!1,this.showStopUpoadButton=!1,this.current_main_holdin_container_class=this.main_holdin_container_start_marking_class,this.current_progress_text_class=this.progress_text_start_marking_class,this.current_spanprogresstext_class=this.spanprogresstext_start_marking_class,this.$refs.uploader.displayLoadingImage=!1,this.current_bottom_green_background_class=this.bottom_green_background_class_start_marking_class,this.current_bottom_main_grey_background_class=this.bottom_main_grey_background_class_start_marking_class_fullscreen},_showErrorThatTerminatesOngoingMarking:function(t){this.alert(t,1),this.realMarkingStartedSoShowProgressInFullscreen=!1,this.serverStatusText=null,this.showStartUpoadButton=!0,this.showStartAllOver=!0,this.showStopUpoadButton=!1,this.$refs.uploader.displayLoadingImage=!1,this.showQuotes=!1,this.current_bottom_green_background_class=this.bottom_green_background_start_uploading_class,this.current_bottom_main_grey_background_class=this.bottom_main_grey_background_class_slide_up,this.$refs.uploader.recentMarkingSessionCompletedSuccessfully=!1},_markingCompletedSuccessfully:function(){this.startMimickingServerSentStatus=!1,this.$refs.uploader.showLoadingMode=!1,this.$refs.uploader.recentMarkingSessionCompletedSuccessfully=!0,this.$refs.uploader.showFinalStatus=!0,this.showQuotes=!1,this.serverStatusText="Marking completed successfully",this.showStartAllOver=!0},_startAllOver:function(){this.$refs.uploader&&(this.$refs.uploader.ongoingServerPollTimestamp=null,this.$refs.uploader.files=[]),this.serverStatusText=null,this.$refs.uploader.commandedServerToStartMarking=!1},doUITransition:function(t){switch(t){case"All Uploads Successful":this._allUploadsCompleted();break;case"Show error":this._showErrorThatTerminatesOngoingMarking();break;case"Marking completed successfully":this._markingCompletedSuccessfully();break;case"Start All Over":break}},change_status:function(t){this.status=t.target.parentElement.innerText.trim(),this.doUITransition(this.status)},files_change:function(t){t.length>0?this.realMarkingStartedSoShowProgressInFullscreen?this.$refs.uploader.recentMarkingSessionCompletedSuccessfully&&(this.$refs.uploader.isCurrentlyUploading?(console.log("is currently uploading"),this.current_bottom_main_grey_background_class=this.bottom_main_grey_background_class_start_marking_class_fullscreen):(console.log("start fresh upload"),this.current_bottom_main_grey_background_class=this.bottom_main_grey_background_class_slide_up)):this.current_bottom_main_grey_background_class=this.bottom_main_grey_background_class_slide_up:this.current_bottom_main_grey_background_class=this.bottom_main_grey_background_class},toggleGeneratingLoremIpsum:function(){if(this.startMimickingServerSentStatus=!this.startMimickingServerSentStatus,this.startMimickingServerSentStatus){var t=this;this.mimickeryIntervalReference=setInterval(function(){t.startMimickingServerSentStatus&&(t.serverStatusText=C()({count:1,units:"sentences",sentenceLowerBound:2,sentenceUpperBound:10*(Math.random()+.1)+2,format:"plain"}))},2e3),console.log(t.serverStatusText)}else this.mimickeryIntervalReference&&clearInterval(this.mimickeryIntervalReference)}}},$=U,P=Object(g["a"])($,o,a,!1,null,null,null),O=P.exports;s("557b"),s("def6"),s("77ed");r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(O)}}).$mount("#app")},"5c35":function(t,e,s){},"86d0":function(t,e,s){"use strict";var r=s("5c35"),o=s.n(r);o.a},"976f":function(t,e,s){},a72f:function(t,e,s){t.exports=s.p+"img/loader.3eda2bfc.svg"},d045:function(t,e,s){"use strict";var r=s("976f"),o=s.n(r);o.a},def6:function(t,e,s){},ffa6:function(t,e,s){t.exports=s.p+"img/circle-checkmark-512.ed157c09.png"}});
//# sourceMappingURL=app.827ab7a4.js.map