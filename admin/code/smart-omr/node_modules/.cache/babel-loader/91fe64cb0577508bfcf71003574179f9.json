{"remainingRequest":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/babel-loader/lib/index.js!/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/cache-loader/dist/cjs.js??ref--0-0!/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/vue-loader/lib/index.js??vue-loader-options!/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/src/components/Uploader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/src/components/Uploader.vue","mtime":1549092814151},{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _Date$now from \"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/@babel/runtime-corejs2/core-js/date/now\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.promise.finally\";\n\nvar _components$props$dat;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Quotes from '../components/Quotes.vue';\nimport Vue from 'vue';\nimport FileUpload from 'vue-upload-component';\nVue.filter('formatSize', function (size) {\n  if (size > 1024 * 1024 * 1024 * 1024) {\n    return (size / 1024 / 1024 / 1024 / 1024).toFixed(2) + ' TB';\n  } else if (size > 1024 * 1024 * 1024) {\n    return (size / 1024 / 1024 / 1024).toFixed(2) + ' GB';\n  } else if (size > 1024 * 1024) {\n    return (size / 1024 / 1024).toFixed(2) + ' MB';\n  } else if (size > 1024) {\n    return (size / 1024).toFixed(2) + ' KB';\n  }\n\n  return size.toString() + ' B';\n});\nexport default (_components$props$dat = {\n  components: {\n    FileUpload: FileUpload,\n    Quotes: Quotes\n  },\n  props: ['showStartUpoadButton', 'showDraggedInFiles', 'showStopUpoadButton', 'startMarking', 'serverStatusText', 'showServerStatusText'],\n  data: function data() {\n    return {\n      files: [],\n      quotes: [],\n      show_quote: true,\n      accept: 'image/png,image/gif,image/jpeg,image/pdf,doc/pdf',\n      extensions: 'gif,jpg,jpeg,png,webp,pdf',\n      // var full = location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: '');\n      // xhr.url=\"http://localhost/git-collaborations/tcexam/admin/code/tce_quotes.php\";\n      webserver_url: location.protocol + '//' + location.hostname,\n      // extensions: ['gif', 'jpg', 'jpeg','png', 'webp'],\n      // extensions: /\\.(gif|jpe?g|png|webp)$/i,\n      minSize: 1024,\n      size: 1024 * 1024 * 10,\n      multiple: true,\n      computationOngoin: false,\n      directory: false,\n      drop: true,\n      dropDirectory: true,\n      addIndex: false,\n      thread: 3,\n      name: 'omrfiles',\n      postAction: 'http://localhost/git-collaborations/tcexam/nodejs/php/smart-marker.php',\n      // putAction: '/upload/put',\n      headers: {// 'X-Csrf-Token': 'xxxx',\n      },\n      data: {\n        'job_id': _Date$now(),\n        error: 'true'\n      },\n      autoCompress: 1024 * 1024,\n      uploadAuto: false,\n      isOption: false,\n      addData: {\n        show: false,\n        name: '',\n        type: '',\n        content: ''\n      },\n      editFile: {\n        show: false,\n        name: ''\n      },\n      lasyYScroll: undefined,\n\n      /******** C O N D I T I O N A L    D I S P L A Y S ********/\n      displayLoadingImage: false,\n      showLoadingMode: true,\n      showPercentageCompletion: true,\n      showCompletionCheckmark: false,\n      showUploadUI: false,\n      showFinalStatus: false,\n\n      /******** C S S    C L A S S E S ********/\n      //main grey background at default\n      bottom_main_grey_background_class: {\n        \"bg-grey-light p-2 pin-b absolute h-24 w-full flex justify-center\": true\n      },\n      //main grey background at start marking\n      bottom_main_grey_background_class_start_marking_class: {\n        \"bg-grey-light p-2 pin-b absolute h-full w-full flex justify-center\": true\n      },\n      bottom_green_background_class: {\n        \"justify-center border rounded p-4 bg-green-lightest flex w-3/4\": true\n      },\n      bottom_green_background_class_start_marking_class: {\n        \"animateAll relative h-full justify-center border rounded p-4 bg-green-lightest flex w-3/4\": true\n      },\n      progress_holder_class: {\n        \"border rounded self-center text-grey-dark relative overflow-hidden w-auto ml-16 p-2 h-34\": true\n      },\n      progress_holder_class_start_marking_class: {\n        \"border rounded self-center text-grey-dark relative overflow-hidden w-full p-2 h-full\": true\n      },\n      current_working_backround_class: {}\n      /******** C S S    C L A S S E S ********/\n\n    };\n  },\n  mounted: function mounted() {\n    this.$nextTick(function () {\n      this.current_working_backround_class = this.bottom_green_background_class_start_marking_class;\n    });\n  },\n  watch: {\n    startMarking: function startMarking() {\n      this.doUITransitionToStartMarking();\n    }\n  },\n  computed: {\n    morphable_LoadingClass: function morphable_LoadingClass() {\n      this.showCompletionCheckmark = !this.showLoadingMode;\n      this.showPercentageCompletion = this.showLoadingMode;\n\n      if (this.showLoadingMode) {\n        return {\n          \"load-complete\": false\n        };\n      } else {\n        return {\n          \"load-complete\": true\n        };\n      }\n    },\n    greenWorkingBackground: function greenWorkingBackground() {\n      return this.current_working_backround_class;\n    },\n    greyMainBackground: function greyMainBackground() {\n      return this.bottom_main_grey_background_class_start_marking_class;\n    },\n    progressHolder: function progressHolder() {\n      return this.progress_holder_class_start_marking_class;\n    },\n    uploadCompleted: function uploadCompleted() {\n      //try optimize for when multiple progress reports will be updating\n      if (this.computationOngoin) {\n        console.log('ongoing..');\n        return;\n      }\n\n      this.computationOngoin = true;\n      var complete = 0;\n\n      for (var i = this.files.length - 1; i >= 0; i--) {\n        var prog = Number(this.files[i].progress);\n        complete += prog == 100 ? 1 : 0; //retry it if it stopped uploading\n        //we are checking preence of xhr because that is what confirms that \n        //there was a failed attempt to upload the file (conf. completely \n        //unattempted file e.g. when file rejected coz extension is part of \n        //blacklisted)\n\n        if (prog < 100 && this.files[i].xhr && !this.files[i].xhr.readyState == 4) {\n          //automatically retry upload\n          this.$refs.update(this.files[i], {\n            active: true,\n            error: '',\n            progress: '0.00'\n          });\n        }\n      }\n\n      this.computationOngoin = false;\n      return complete == this.files.length;\n    }\n  }\n}, _defineProperty(_components$props$dat, \"watch\", {\n  'addData.show': function addDataShow(show) {\n    if (show) {\n      this.addData.name = '';\n      this.addData.type = '';\n      this.addData.content = '';\n    }\n  }\n}), _defineProperty(_components$props$dat, \"methods\", {\n  toggleProgressStatus: function toggleProgressStatus() {\n    this.showLoadingMode = !this.showLoadingMode;\n  },\n  inputFilter: function inputFilter(newFile, oldFile, prevent) {\n    if (newFile && !oldFile) {\n      // Before adding a file\n      // 添加文件前\n      // Filter system files or hide files\n      // 过滤系统文件 和隐藏文件\n      if (/(\\/|^)(Thumbs\\.db|desktop\\.ini|\\..+)$/.test(newFile.name)) {\n        return prevent();\n      }\n    }\n\n    if (newFile && (!oldFile || newFile.file !== oldFile.file)) {\n      // Create a blob field\n      // 创建 blob 字段\n      newFile.blob = '';\n      var URL = window.URL || window.webkitURL;\n\n      if (URL && URL.createObjectURL) {\n        newFile.blob = URL.createObjectURL(newFile.file);\n      } // Thumbnails\n      // 缩略图\n\n\n      newFile.thumb = '';\n\n      if (newFile.blob && newFile.type.substr(0, 6) === 'image/') {\n        newFile.thumb = newFile.blob;\n      }\n    }\n  },\n  // add, update, remove File Event\n  inputFile: function inputFile(newFile, oldFile) {\n    if (newFile && oldFile) {\n      // update\n      if (newFile.active && !oldFile.active) {\n        // beforeSend\n        // min size\n        if (newFile.size >= 0 && this.minSize > 0 && newFile.size < this.minSize) {\n          this.$refs.upload.update(newFile, {\n            error: 'size'\n          });\n        }\n      }\n\n      if (newFile.progress !== oldFile.progress) {\n        // progress\n        // console.log('progress:', oldFile , newFile)\n        // this.files = this.$refs.files;\n        if (Number(newFile.progress) == 100) {\n          console.log(newFile.xhr);\n        }\n      }\n\n      if (newFile.error && !oldFile.error) {// error\n      }\n\n      if (newFile.success && !oldFile.success) {// success\n      }\n\n      var _node_ = document.getElementById(newFile.id);\n\n      if (_node_) {\n        _node_.scrollIntoView();\n      }\n    }\n\n    if (!newFile && oldFile) {\n      // remove\n      if (oldFile.success && oldFile.response.id) {// $.ajax({\n        //   type: 'DELETE',\n        //   url: '/upload/delete?id=' + oldFile.response.id,\n        // })\n      }\n    } // Automatically activate upload\n\n\n    if (Boolean(newFile) !== Boolean(oldFile) || oldFile.error !== newFile.error) {\n      if (this.uploadAuto && !this.$refs.upload.active) {\n        this.$refs.upload.active = true;\n      }\n    }\n  },\n  doUITransitionToStartMarking: function doUITransitionToStartMarking() {\n    /*\n    //loader img disappears\n    //the light green background enlarges to fill the screen\n    //red colored progress stuff becomes the progress bar\n    //quotes appear underneath the progressbar\n    //center of progressbar shows percentage completion\n    //at anytime that error occurs along the way, clear evrrything and use Swal to handle it\n    */\n    this.displayLoadingImage = true;\n  },\n  get_quotes_from_db: function get_quotes_from_db() {\n    var vm = this;\n    var xhr = new XMLHttpRequest();\n    xhr.url = \"\".concat(this.webserver_url, \"/git-collaborations/tcexam/admin/code/tce_quotes.php\\\"\");\n    xhr.open(\"GET\", xhr.url, true);\n    xhr.retry = 1; //Send the proper header information along with the request\n    // xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n    xhr.onreadystatechange = function () {\n      //Call a function when the state changes.\n      if (xhr.readyState == 4) {\n        if (xhr.status == 200) {\n          // Request finished. Do processing here.\n          console.log(\"done\");\n          console.log(xhr.responseText); //eslint-disable-next-line\n\n          try {\n            var quotes = _toConsumableArray(JSON.parse(xhr.responseText));\n\n            vm.quotes.splice(0, 0, quotes);\n          } catch (Ex) {\n            console.log(Ex);\n            console.log(xhr);\n            console.log(xhr.responseText);\n          }\n        } else {\n          console.log(xhr);\n          console.log(xhr.status);\n          console.log(xhr.responseText); //redo the request\n\n          this.retry++;\n\n          if (this.retry < 10) {\n            this.open(\"GET\", xhr.url, true);\n            this.send();\n          }\n        }\n      } else {//redo the request\n        //Value State Description\n        // 0 UNSENT  Client has been created. open() not called yet.\n        // 1 OPENED  open() has been called.\n        // 2 HEADERS_RECEIVED  send() has been called, and headers and status are available.\n        // 3 LOADING Downloading; responseText holds partial data.\n        // 4 DONE  The operation is complete.\n      }\n    };\n\n    xhr.send(\"foo=bar&lorem=ipsum\"); // xhr.send('string'); \n    // xhr.send(new Blob()); \n    // xhr.send(new Int8Array()); \n    // xhr.send({ form: 'data' }); \n    // xhr.send(document);\n  }\n}), _components$props$dat);",{"version":3,"sources":["Uploader.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"upload\" v-show=\"!isOption\">\n    <div class=\"absolute w-full h-full\">\n      <div v-if=\"showUploadUI && !files.length\">\n        <td colspan=\"7\">\n          <div class=\"dropbox text-center absolute p-5 w-full h-full\">\n            <h4>Drop folder to upload...</h4>\n            <!-- <br/>or -->\n            <!-- <label :for=\"name\" class=\"btn btn-lg btn-primary\">Select Files</label> -->\n            <div v-show=\"$refs.upload && $refs.upload.dropActive\" class=\"drop-active mt-5\">\n              <h3 class=\"font-sans\">Drop folder to upload</h3>\n            </div>\n          </div>\n        </td>\n      </div>\n\n      <table class=\"mostly-customized-scrollbar drop-table overflow-auto h-full w-full pb-24 block absolute\">\n        <thead v-show=\"files.length\">\n          <tr class=\"bg-pink-light w-full\">\n            <th> #</th>\n            <th>Thumbnail</th>\n            <th>Name</th>\n            <th>Size</th>\n            <th>Speed</th>\n            <th>Status</th>\n            <th class=\"w-full\">Action</th>\n          </tr>\n        </thead>\n        <tbody class=\"\">\n            <tr v-for=\"(file, index) in files\" :key=\"file.id\" :class=\"{'bg-red-light': file.error && file.error!='denied'}\">\n              <td>{{index+1}}</td>\n              <td>\n                <img v-if=\"file.thumb\" :src=\"file.thumb\" width=\"40\" height=\"auto\" />\n                <span v-else>No Image</span>\n              </td>\n              <td>\n                <div class=\"filename\">\n                  {{file.name}}\n                </div>\n                <div :id=\"file.id\" class=\"progress\" v-if=\"file.active || file.progress !== '0.00'\">\n                  <div :class=\"{'progress-bar': true, 'progress-bar-striped': true, 'bg-green': Number(file.progress) != 100 , 'bg-danger': file.error, 'progress-bar-animated': file.active}\" role=\"progressbar\" :style=\"{width: file.progress + '%'}\">\n                    {{file.progress}}%\n                  </div>\n                </div>\n              </td>\n              <td>{{file.size | formatSize}}</td>\n              <td>{{file.speed | formatSize}}</td>\n\n              <td v-if=\"file.error\">{{file.error}}</td>\n              <td v-else-if=\"file.success\">success</td>\n              <td v-else-if=\"file.active\">active</td>\n              <td v-else></td>\n\n              <td>\n                <div class=\"dropdown\">\n                  <button class=\"btn btn-secondary btn-sm dropdown-toggle\" type=\"button\">\n                    Action\n                  </button>\n                  <div class=\"dropdown-content \">\n                    <a :class=\"{'dropdown-item': true, disabled: file.active || file.success || file.error === 'compressing'}\" href=\"#\" @click.prevent=\"file.active || file.success || file.error === 'compressing' ? false :  onEditFileShow(file)\">Edit</a>\n                    <a :class=\"{'dropdown-item': true, disabled: !file.active}\" href=\"#\" @click.prevent=\"file.active ? $refs.upload.update(file, {error: 'cancel'}) : false\">Cancel</a>\n                    <a class=\"dropdown-item\" href=\"#\" v-if=\"file.active\" @click.prevent=\"$refs.upload.update(file, {active: false})\">Abort</a>\n                    <a class=\"dropdown-item\" href=\"#\" v-else-if=\"file.error && file.error !== 'compressing' && $refs.upload.features.html5\" @click.prevent=\"$refs.upload.update(file, {active: true, error: '', progress: '0.00'})\">Retry upload</a>\n                    <a :class=\"{'dropdown-item': true, disabled: file.success || file.error === 'compressing'}\" href=\"#\" v-else @click.prevent=\"file.success || file.error === 'compressing' ? false : $refs.upload.update(file, {active: true})\">Upload</a>\n                    <div class=\"dropdown-divider\"></div>\n                    <a class=\"dropdown-item\" href=\"#\" @click.prevent=\"$refs.upload.remove(file)\">Remove</a>\n                  </div>\n                </div>\n              </td>\n            </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <transition \n      enter-active-class=\"animated bounceInUp\"\n      leave-active-class=\"animated bounceOutDown\"\n    >\n      <div v-show=\" showDraggedInFiles \" \n        :class=\"greyMainBackground\" class=\"animateAll\" \n      >\n        <div class=\"hidden\">\n            <!-- :put-action=\"putAction\" -->\n            <file-upload\n              class=\"btn btn-primary dropdown-toggle\"\n              :post-action=\"postAction\"\n              :extensions=\"extensions\"\n              :accept=\"accept\"\n              :multiple=\"multiple\"\n              :directory=\"directory\"\n              :size=\"size || 0\"\n              :thread=\"thread < 1 ? 1 : (thread > 5 ? 5 : thread)\"\n              :headers=\"headers\"\n              :data=\"data\"\n              :drop=\"drop\"\n              :drop-directory=\"dropDirectory\"\n              :add-index=\"addIndex\"\n              v-model=\"files\"\n              @nullblock-input-filter=\"inputFilter\"\n              @input-file=\"inputFile\"\n              ref=\"upload\">\n              <!-- <i class=\"fa fa-plus\"></i> -->\n              <!-- Select -->\n            </file-upload>\n        </div>\n        <transition>\n          <button type=\"button\" class=\"button w-64 h-8 self-center\" v-if=\" showStartUpoadButton && (!$refs.upload || !$refs.upload.active) \" @click.prevent=\"$refs.upload.active = true\">\n            <!-- <i class=\"fa fa-arrow-up\" aria-hidden=\"true\"></i> -->\n            Start Uploads\n          </button>\n          <button type=\"button\" class=\"button w-64 h-8 self-center mx-1 mr-1 ml-1\" v-if=\"showStopUpoadButton\" @click.prevent=\"$refs.upload.active = false\">\n            <!-- <i class=\"fa fa-stop\" aria-hidden=\"true\"></i> -->\n            Stop Upload\n          </button>\n        </transition>\n\n        <transition>\n          <div :class=\"greenWorkingBackground\" class='animateAll'>\n            <!-- <div class=\"inline\">\n              <div class=\"lds-roller h-4\">\n                <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>\n              </div>\n            </div> -->\n            <transition>\n              <img v-if=\"displayLoadingImage\" class=\"inline\" width=\"70px\" src=\"@/assets/images/loader.svg\">\n            </transition>\n\n            <div :class=\"progressHolder\" class=\"animateAll main-holdin-container\">\n              \n              <div @click=\"toggleProgressStatus\" class=\"btn\"> \n                Progress \n              </div>\n\n              <transition mode=\"out-in\">\n                <div class=\"serverStatusText text-center inline-block self-center w-full h-10 asolute overflow-hidden\">\n                    <span v-if=\"showServerStatusText\" class=\"inline-block self-center relatvie tracking-wide text-xs bg-red-light p-2 font-bold text-white rounded\" nokey=\"serverStatusText\" v-html=\"serverStatusText\"></span>\n                </div>\n              </transition>\n\n              <div  class=\"relative w-full flex main-progress-area-holder flex-col\">\n\n                <transition>\n                  <div v-if=\"showPercentageCompletion\" class=\"animateAll mt-16 w-full h-full pin-x self-center text-center absolute font-sans font-bold text-3xl\" >16%</div>\n                </transition>\n\n                <div class=\"-ml-2 mt-6 w-32 h-32 block pin-x pin-y self-center text-center relative progress-control-container\">\n                  <div :class=\"morphable_LoadingClass\" class=\"-ml-12 self-center absolute circle-loader\">\n                    <div v-if=\"showCompletionCheckmark\" class=\"checkmark draw\"></div>\n                  </div>\n                </div>\n\n                <div class=\"h-auto relative flex text-white w-full\">\n                  <quotes :webserver_url=\"webserver_url\"></quotes>                  \n                </div>\n\n                <div class=\"self-center report relative\" v-if=\"showFinalStatus\">\n                  <div>\n                    Total scripts marked: <span class=\"label m-1 inline-block\">124</span>\n                  </div>\n                  <div>\n                    Total units used: <span class=\"label m-1 inline-block\">103</span>\n                  </div>\n                  <div>\n                    Total units left: <span class=\"label m-1 inline-block\">433</span>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n\n          </div>\n        </transition>\n\n      </div>\n    </transition>\n  </div>\n</template>\n\n<style type=\"text/css\">\n  /*            \n  //loader img disappears\n  //the light green background enlarges to fill the screen\n  //red colored progress stuff becomes the progress bar\n  //quotes appear underneath the progressbar\n  //center of progressbar shows percentage completion\n  //at anytime that error occurs along the way, clear evrrything and use Swal to handle it\n  */\n \n  .animateAll{\n    transition: all 1s;\n  }\n</style>\n\n<script>\nimport Quotes from '../components/Quotes.vue'\nimport Vue from 'vue'\nimport FileUpload from 'vue-upload-component'\n\nVue.filter('formatSize', function (size) {\n  if (size > 1024 * 1024 * 1024 * 1024) {\n    return (size / 1024 / 1024 / 1024 / 1024).toFixed(2) + ' TB'\n  } else if (size > 1024 * 1024 * 1024) {\n    return (size / 1024 / 1024 / 1024).toFixed(2) + ' GB'\n  } else if (size > 1024 * 1024) {\n    return (size / 1024 / 1024).toFixed(2) + ' MB'\n  } else if (size > 1024) {\n    return (size / 1024).toFixed(2) + ' KB'\n  }\n  return size.toString() + ' B'\n})\n\nexport default {\n  components: {\n    FileUpload,\n    Quotes\n  },\n  props:[\n    'showStartUpoadButton',\n    'showDraggedInFiles',\n    'showStopUpoadButton',\n    'startMarking',\n    'serverStatusText',\n    'showServerStatusText'\n  ],\n  data() {\n    return {\n      files: [],\n      quotes:[],\n      show_quote: true,\n      accept: 'image/png,image/gif,image/jpeg,image/pdf,doc/pdf',\n      extensions: 'gif,jpg,jpeg,png,webp,pdf',\n\n      // var full = location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: '');\n      // xhr.url=\"http://localhost/git-collaborations/tcexam/admin/code/tce_quotes.php\";\n      webserver_url: location.protocol+'//'+location.hostname,\n\n      // extensions: ['gif', 'jpg', 'jpeg','png', 'webp'],\n      // extensions: /\\.(gif|jpe?g|png|webp)$/i,\n      minSize: 1024,\n      size: 1024 * 1024 * 10,\n      multiple: true,\n      computationOngoin:false,\n      directory: false,\n      drop: true,\n      dropDirectory: true,\n      addIndex: false,\n      thread: 3,\n      name: 'omrfiles',\n      postAction: 'http://localhost/git-collaborations/tcexam/nodejs/php/smart-marker.php',\n      // putAction: '/upload/put',\n      headers: {\n        // 'X-Csrf-Token': 'xxxx',\n      },\n      data: {\n        'job_id':Date.now(),\n        error:'true'\n      },\n      autoCompress: 1024 * 1024,\n      uploadAuto: false,\n      isOption: false,\n      addData: {\n        show: false,\n        name: '',\n        type: '',\n        content: '',\n      },\n      editFile: {\n        show: false,\n        name: '',\n      },\n\n      lasyYScroll:undefined,\n\n      /******** C O N D I T I O N A L    D I S P L A Y S ********/\n      \n      displayLoadingImage: false,\n      showLoadingMode: true,\n      showPercentageCompletion: true,\n      showCompletionCheckmark: false,\n      showUploadUI: false,\n      showFinalStatus: false,\n\n\n      /******** C S S    C L A S S E S ********/\n\n      //main grey background at default\n      bottom_main_grey_background_class: {\n        \"bg-grey-light p-2 pin-b absolute h-24 w-full flex justify-center\": true\n      },\n\n      //main grey background at start marking\n      bottom_main_grey_background_class_start_marking_class: {\n        \"bg-grey-light p-2 pin-b absolute h-full w-full flex justify-center\": true\n      },\n      \n      bottom_green_background_class: {\n        \"justify-center border rounded p-4 bg-green-lightest flex w-3/4\": true\n      },\n\n      bottom_green_background_class_start_marking_class: {\n        \"animateAll relative h-full justify-center border rounded p-4 bg-green-lightest flex w-3/4\": true\n      },\n\n      progress_holder_class: {\n        \"border rounded self-center text-grey-dark relative overflow-hidden w-auto ml-16 p-2 h-34\": true\n      },\n\n      progress_holder_class_start_marking_class: {\n        \"border rounded self-center text-grey-dark relative overflow-hidden w-full p-2 h-full\": true\n      },\n\n      current_working_backround_class: {}\n\n      /******** C S S    C L A S S E S ********/\n\n    }\n  },\n  mounted:function(){\n    this.$nextTick(function(){\n      this.current_working_backround_class = this.bottom_green_background_class_start_marking_class;\n    });\n  },\n  watch: {\n    startMarking: function(){\n      this.doUITransitionToStartMarking();\n    },\n  },\n  computed:{\n    morphable_LoadingClass:function(){\n      this.showCompletionCheckmark = !this.showLoadingMode;\n      this.showPercentageCompletion = this.showLoadingMode;\n      if( this.showLoadingMode ){\n        return { \"load-complete\" : false }\n      }else{\n        return { \"load-complete\" : true }\n      }\n    },\n    greenWorkingBackground:function(){\n      return this.current_working_backround_class;\n    },\n    greyMainBackground:function(){\n      return this.bottom_main_grey_background_class_start_marking_class;\n    },\n    progressHolder: function(){\n      return this.progress_holder_class_start_marking_class;\n    },\n    uploadCompleted:function(){\n\n      //try optimize for when multiple progress reports will be updating\n      if(this.computationOngoin){\n        console.log('ongoing..');\n        return;\n      }\n\n      this.computationOngoin = true;\n\n      let complete = 0;\n      for (var i = this.files.length - 1; i >= 0; i--) {\n        let prog = Number(this.files[i].progress);\n        complete += (prog == 100) ? 1 : 0;\n\n        //retry it if it stopped uploading\n        //we are checking preence of xhr because that is what confirms that \n        //there was a failed attempt to upload the file (conf. completely \n        //unattempted file e.g. when file rejected coz extension is part of \n        //blacklisted)\n        if(prog<100 && this.files[i].xhr && !this.files[i].xhr.readyState==4){\n          //automatically retry upload\n          this.$refs.update(this.files[i], {active: true, error: '', progress: '0.00'});\n        }\n      }\n\n      this.computationOngoin = false;\n      return complete == this.files.length;\n    }\n  },\n  watch: {\n    'addData.show'(show) {\n      if (show) {\n        this.addData.name = ''\n        this.addData.type = ''\n        this.addData.content = ''\n      }\n    }\n  },\n  methods: {\n    toggleProgressStatus:function(){\n      this.showLoadingMode = !this.showLoadingMode;\n    },\n    inputFilter(newFile, oldFile, prevent) {\n      if (newFile && !oldFile) {\n        // Before adding a file\n        // 添加文件前\n        // Filter system files or hide files\n        // 过滤系统文件 和隐藏文件\n        if (/(\\/|^)(Thumbs\\.db|desktop\\.ini|\\..+)$/.test(newFile.name)) {\n          return prevent()\n        }\n      }\n      if (newFile && (!oldFile || newFile.file !== oldFile.file)) {\n        // Create a blob field\n        // 创建 blob 字段\n        newFile.blob = ''\n        let URL = window.URL || window.webkitURL\n        if (URL && URL.createObjectURL) {\n          newFile.blob = URL.createObjectURL(newFile.file)\n        }\n        // Thumbnails\n        // 缩略图\n        newFile.thumb = ''\n        if (newFile.blob && newFile.type.substr(0, 6) === 'image/') {\n          newFile.thumb = newFile.blob\n        }\n      }\n    },\n    // add, update, remove File Event\n    inputFile(newFile, oldFile) {\n      if (newFile && oldFile) {\n        // update\n        if (newFile.active && !oldFile.active) {\n          // beforeSend\n          // min size\n          if (newFile.size >= 0 && this.minSize > 0 && newFile.size < this.minSize) {\n            this.$refs.upload.update(newFile, { error: 'size' })\n          }\n        }\n        if (newFile.progress !== oldFile.progress) {\n          // progress\n          // console.log('progress:', oldFile , newFile)\n          // this.files = this.$refs.files;\n          if (Number(newFile.progress) == 100) {\n            console.log(newFile.xhr);\n          }\n        }\n        if (newFile.error && !oldFile.error) {\n          // error\n        }\n        if (newFile.success && !oldFile.success) {\n          // success\n        }\n\n        var _node_ = document.getElementById(newFile.id);\n        if(_node_){\n          _node_.scrollIntoView();\n        }\n      }\n      if (!newFile && oldFile) {\n        // remove\n        if (oldFile.success && oldFile.response.id) {\n          // $.ajax({\n          //   type: 'DELETE',\n          //   url: '/upload/delete?id=' + oldFile.response.id,\n          // })\n        }\n      }\n      // Automatically activate upload\n      if (Boolean(newFile) !== Boolean(oldFile) || oldFile.error !== newFile.error) {\n        if (this.uploadAuto && !this.$refs.upload.active) {\n          this.$refs.upload.active = true\n        }\n      }\n    },\n    doUITransitionToStartMarking:function(){\n      /*\n      //loader img disappears\n      //the light green background enlarges to fill the screen\n      //red colored progress stuff becomes the progress bar\n      //quotes appear underneath the progressbar\n      //center of progressbar shows percentage completion\n      //at anytime that error occurs along the way, clear evrrything and use Swal to handle it\n      */\n     this.displayLoadingImage = true;\n    },\n\n    get_quotes_from_db:function(){\n      var vm = this;\n      var xhr = new XMLHttpRequest();\n      xhr.url=`${this.webserver_url}/git-collaborations/tcexam/admin/code/tce_quotes.php\"`;\n      xhr.open(\"GET\", xhr.url, true);\n      xhr.retry = 1;\n\n      //Send the proper header information along with the request\n      // xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      xhr.onreadystatechange = function() {//Call a function when the state changes.\n          if(xhr.readyState == 4) {\n              if(xhr.status == 200) {\n                // Request finished. Do processing here.\n                console.log(\"done\");\n                console.log(xhr.responseText);\n                //eslint-disable-next-line\n                try{\n                  var quotes = [...JSON.parse( xhr.responseText ) ]\n                  vm.quotes.splice( 0, 0, quotes );\n                }\n                catch(Ex){\n                  console.log(Ex);\n                  console.log(xhr);\n                  console.log(xhr.responseText);\n                }\n              } else {\n                console.log(xhr);\n                console.log(xhr.status);\n                console.log(xhr.responseText);\n                //redo the request\n                this.retry++;\n                if( this.retry < 10 ){\n                  this.open(\"GET\", xhr.url, true);\n                  this.send();\n                }\n              }\n          }else{\n                //redo the request\n                //Value State Description\n              // 0 UNSENT  Client has been created. open() not called yet.\n              // 1 OPENED  open() has been called.\n              // 2 HEADERS_RECEIVED  send() has been called, and headers and status are available.\n              // 3 LOADING Downloading; responseText holds partial data.\n              // 4 DONE  The operation is complete.\n          }\n      }\n\n      xhr.send(\"foo=bar&lorem=ipsum\"); \n      // xhr.send('string'); \n      // xhr.send(new Blob()); \n      // xhr.send(new Int8Array()); \n      // xhr.send({ form: 'data' }); \n      // xhr.send(document);\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components"}]}