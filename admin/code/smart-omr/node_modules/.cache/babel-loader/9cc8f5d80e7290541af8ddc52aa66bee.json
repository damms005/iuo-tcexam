{"remainingRequest":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/babel-loader/lib/index.js!/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/cache-loader/dist/cjs.js??ref--0-0!/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/vue-loader/lib/index.js??vue-loader-options!/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/src/components/Quotes.vue?vue&type=script&lang=js&","dependencies":[{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/src/components/Quotes.vue","mtime":1557592414914},{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/cache-loader/dist/cjs.js","mtime":1557592134683},{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/babel-loader/lib/index.js","mtime":1557592134607},{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/cache-loader/dist/cjs.js","mtime":1557592134683},{"path":"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/vue-loader/lib/index.js","mtime":1557592138674}],"contextDependencies":[],"result":["import _toConsumableArray from \"/opt/lampp/htdocs/git-collaborations/tcexam/admin/code/smart-omr/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ProgressBar from 'progressbar.js'; //get quotes from the database\n//we will be getting 100 quotes randomly from the db\n//we display  a quote every 7 secs\n//at each display iteration, if quotes available is less than 20, we fetch another 100\n\nexport default {\n  props: [\"webserver_url\"],\n  data: function data() {\n    return {\n      available_quotes: [],\n      quote: '',\n      quotes_change_interval: 7000,\n      //in ms\n      show_quote: true,\n      quotesBarWidth: 0,\n      count: 0,\n      ongoingTimeout: 0,\n      progressbar: null\n    };\n  },\n  computed: {},\n  mounted: function mounted() {\n    this.progressbar = new ProgressBar.Circle(\"#progressbar\", {\n      strokeWidth: 9,\n      easing: 'linear',\n      duration: 1000,\n      color: 'grey',\n      trailColor: '',\n      trailWidth: 0,\n      svgStyle: null,\n      fill: null,\n      warnings: true\n    });\n  },\n  created: function created() {\n    this.get_quotes_from_db();\n    this.displayNextQuote();\n  },\n  methods: {\n    displayNextQuote: function displayNextQuote() {\n      if (this.available_quotes.length > 0) {\n        //don't allow us to run dry before refueling!!!\n        if (this.available_quotes.length < 20) {\n          this.get_quotes_from_db();\n        } //a quote just compelted displaying\n\n\n        var dat = this.available_quotes.pop();\n        var numberOfWordsInQuote = dat.quote.split(' ').length;\n        var quoteDisplayTimeInSecs = Math.floor(numberOfWordsInQuote / 2) + 2; //use 1/2 of a second to display a word\n        //update the UI\n\n        this.quote = dat; //find what 1 secs corresponds to in percontage\n\n        var incrementPerSecond = 100 / quoteDisplayTimeInSecs; //we need to delay a little before doing animation, so that quote display transition will not cause quote meter to start reading while quote still not fully opacitied-out\n\n        this.quotesBarWidth = 0;\n        this.progressbar.set(0);\n        this.incrementQuoteWidth(incrementPerSecond); //show next quote at the right time\n\n        var vm = this;\n        setTimeout(function () {\n          //we do not want animation when setting to zero\n          if (vm.ongoingTimeout) {\n            clearTimeout(vm.ongoingTimeout);\n          }\n\n          vm.displayNextQuote();\n        }, quoteDisplayTimeInSecs * 1000);\n      } else {\n        //wait a while before displaying next quote so that if it was network not copleted as at present time, network should have completed by time we retrying to show next quote\n        var vm = this;\n        setTimeout(function () {\n          vm.displayNextQuote();\n        }, 1000);\n      }\n    },\n    incrementQuoteWidth: function incrementQuoteWidth(increment) {\n      this.quotesBarWidth += increment;\n      this.progressbar.animate(this.quotesBarWidth / 100); //ensure not to offshoot 100\n\n      if (this.quotesBarWidth + increment <= 100) {\n        var vm = this;\n        this.ongoingTimeout = setTimeout(function () {\n          vm.incrementQuoteWidth(increment);\n        }, 1000);\n      }\n    },\n    retry_ajax_request: function retry_ajax_request(xhr) {\n      xhr.retry++;\n\n      if (xhr.retry < 10) {\n        xhr.open(\"GET\", xhr.url, true);\n        xhr.send();\n      } else {}\n    },\n    get_quotes_from_db: function get_quotes_from_db() {\n      var xhr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var vm = this;\n\n      if (xhr == null) {\n        xhr = new XMLHttpRequest();\n        xhr.url = \"\".concat(this.webserver_url, \"/git-collaborations/tcexam/admin/code/tce_quotes.php\");\n        xhr.open(\"GET\", xhr.url, true);\n        xhr.retry = 1;\n      } //Send the proper header information along with the request\n      // xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n\n      xhr.onreadystatechange = function () {\n        //Call a function when the state changes.\n        if (xhr.readyState == 4) {\n          if (xhr.status == 200) {\n            // Request finished. Do processing here.\n            //eslint-disable-next-line\n            try {\n              vm.available_quotes = _toConsumableArray(JSON.parse(xhr.responseText));\n            } catch (Ex) {\n              console.log(Ex);\n              console.log(xhr);\n              vm.retry_ajax_request(xhr);\n            }\n          } else {\n            console.log(xhr);\n            console.log(xhr.status);\n            vm.retry_ajax_request(xhr);\n          }\n        } else {//redo the request\n          //Value State Description\n          // 0 UNSENT  Client has been created. open() not called yet.\n          // 1 OPENED  open() has been called.\n          // 2 HEADERS_RECEIVED  send() has been called, and headers and status are available.\n          // 3 LOADING Downloading; responseText holds partial data.\n          // 4 DONE  The operation is complete.\n        }\n      };\n\n      xhr.send(\"foo=bar&lorem=ipsum\"); // xhr.send('string'); \n      // xhr.send(new Blob()); \n      // xhr.send(new Int8Array()); \n      // xhr.send({ form: 'data' }); \n      // xhr.send(document);\n    }\n  }\n};",{"version":3,"sources":["Quotes.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"absolute flex quotes-main-component w-full h-full\">\n    <div class=\"absolute inline-block h-48 mt-2 w-full\" v-show=\"this.show_quote\">\n\n      <blockquote class=\"flex flex-col justify-center\">\n\n        <transition\n          enter-active-class=\"animated fadeIn fast\"\n          leave-active-class=\"animated fadeOut faster\"\n          mode=\"out-in\"\n        >\n          <div class=\"quotation flex-1 tracking-wide text-center\">\n            <span class=\"pl-6 font-sans text-sm font-hairline\" :key=\"quote.quote\">\n              {{quote.quote}}\n            </span>\n          </div>\n        </transition>\n          \n          <div class=\"self-center block pin-r mr-2 mt-6 leading-loose\">\n            <div class=\"relative flex\">\n              <div class=\"mt-1 pin-y inline absolute opacity-50 p-1 w-6 h-6\" id=\"progressbar\"></div>\n              <div class=\"inline ml-8 pin-y author italic text-xs font-bold tracking-wide\">\n                <span class=\"font-heavy text-heavy\">&dash;</span>\n                  <transition\n                    enter-active-class=\"animated fadeIn fast\"\n                    leave-active-class=\"animated fadeOut faster\"\n                    mode=\"out-in\"\n                  >\n                    <span :key=\"quote.author\">\n                      {{quote.author}}\n                    </span>\n                </transition>\n              </div>\n              <!-- <small>{{quote.genre}}</small> -->\n            </div>\n          </div>\n      </blockquote>\n    </div>\n  </div>\n</template>\n\n<style type=\"text/css\">\n  .v-enter-active, .v-leave-active {\n    transition: opacity .5s;\n  }\n  .v-enter, .v-leave-to /* .v-leave-active below version 2.1.8 */ {\n    opacity: 0;\n  }\n</style>\n\n<script>\n\n  import ProgressBar from 'progressbar.js'\n\n   //get quotes from the database\n   //we will be getting 100 quotes randomly from the db\n   //we display  a quote every 7 secs\n   //at each display iteration, if quotes available is less than 20, we fetch another 100\nexport default {  \n  props: [\n      \"webserver_url\"\n  ],\n  data:function(){\n    return {\n      available_quotes:[],\n      quote: '',\n      quotes_change_interval: 7000,//in ms\n      show_quote: true,\n      quotesBarWidth: 0,\n      count: 0,\n      ongoingTimeout: 0,\n      progressbar: null\n    }\n  },\n  computed: {\n  },\n  mounted:function(){\n    this.progressbar = new ProgressBar.Circle(\"#progressbar\", {\n          strokeWidth: 9,\n          easing: 'linear',\n          duration: 1000,\n          color: 'grey',\n          trailColor: '',\n          trailWidth: 0,\n          svgStyle: null,\n          fill: null,\n          warnings: true\n        });\n  },\n  created: function () {\n      this.get_quotes_from_db();\n      this.displayNextQuote();\n  },\n  methods:{\n    displayNextQuote:function(){\n      if( this.available_quotes.length > 0 ) {\n\n        //don't allow us to run dry before refueling!!!\n        if( this.available_quotes.length < 20 ) {\n          this.get_quotes_from_db();\n        }\n\n        //a quote just compelted displaying\n        var dat = this.available_quotes.pop();\n        var numberOfWordsInQuote = dat.quote.split(' ').length;\n        var quoteDisplayTimeInSecs = Math.floor(numberOfWordsInQuote / 2 ) + 2;//use 1/2 of a second to display a word\n\n        //update the UI\n        this.quote = dat;\n        //find what 1 secs corresponds to in percontage\n        var incrementPerSecond = 100 /quoteDisplayTimeInSecs;\n\n\n        //we need to delay a little before doing animation, so that quote display transition will not cause quote meter to start reading while quote still not fully opacitied-out\n        this.quotesBarWidth = 0;\n        this.progressbar.set(0);\n        this.incrementQuoteWidth( incrementPerSecond );\n\n        //show next quote at the right time\n        var vm = this;\n        setTimeout(function(){\n          //we do not want animation when setting to zero\n          if(vm.ongoingTimeout){\n            clearTimeout( vm.ongoingTimeout );\n          }\n          vm.displayNextQuote();\n        }, (quoteDisplayTimeInSecs*1000) )\n      }else{\n\n        //wait a while before displaying next quote so that if it was network not copleted as at present time, network should have completed by time we retrying to show next quote\n        var vm = this;\n        setTimeout(function(){\n          vm.displayNextQuote();\n        },1000)\n\n      }\n    },\n    incrementQuoteWidth:function(increment){\n        this.quotesBarWidth += increment;\n        this.progressbar.animate(this.quotesBarWidth/100);\n        //ensure not to offshoot 100\n        if((this.quotesBarWidth+increment) <= 100){\n          var vm = this;\n          this.ongoingTimeout = setTimeout(function(){\n            vm.incrementQuoteWidth( increment );\n          }, 1000 )\n        }\n    },\n    retry_ajax_request:function( xhr ){\n        xhr.retry++;\n        if( xhr.retry < 10 ){\n          xhr.open(\"GET\", xhr.url, true);\n          xhr.send();\n        }else{\n        }\n    },\n    get_quotes_from_db:function( xhr = null ){\n      var vm = this;\n      if( xhr == null ){\n        xhr = new XMLHttpRequest();\n        xhr.url = `${this.webserver_url}/git-collaborations/tcexam/admin/code/tce_quotes.php`;\n        xhr.open(\"GET\", xhr.url, true);\n        xhr.retry = 1;\n      }\n\n      //Send the proper header information along with the request\n      // xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      xhr.onreadystatechange = function() {//Call a function when the state changes.\n          if(xhr.readyState == 4) {\n              if(xhr.status == 200) {\n                // Request finished. Do processing here.\n                //eslint-disable-next-line\n                try{\n                  vm.available_quotes = [...JSON.parse( xhr.responseText ) ];\n                }\n                catch(Ex){\n                  console.log(Ex);\n                  console.log(xhr);\n                  vm.retry_ajax_request(xhr);\n                }\n              } else {\n                console.log(xhr);\n                console.log(xhr.status);\n                vm.retry_ajax_request(xhr);\n              }\n          }else{\n                //redo the request\n                //Value State Description\n              // 0 UNSENT  Client has been created. open() not called yet.\n              // 1 OPENED  open() has been called.\n              // 2 HEADERS_RECEIVED  send() has been called, and headers and status are available.\n              // 3 LOADING Downloading; responseText holds partial data.\n              // 4 DONE  The operation is complete.\n          }\n      }\n\n      xhr.send(\"foo=bar&lorem=ipsum\"); \n      // xhr.send('string'); \n      // xhr.send(new Blob()); \n      // xhr.send(new Int8Array()); \n      // xhr.send({ form: 'data' }); \n      // xhr.send(document);\n    },\n  }\n}\n</script>\n"],"sourceRoot":"src/components"}]}