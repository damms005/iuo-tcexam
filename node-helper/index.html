<!doctype html>
<html>

<head>
  <title>Socket.IO chat</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.min.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

  <script src="socket.io.js"></script>
  <script>
    var socket = io();
    socket.on('server-connection-acknowledged', function (data) {
      console.log('server-connection-acknowledged ' + data);
      socket.emit('client-thanking-server',`connection connection-acknowledged: ${data}`)
  });
    </script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.js"></script>
</head>

<body>
  <div id="app">
    <v-app>
      <v-content>
        <v-container>
          <v-layout text-xs-left wrap>
            <v-flex xs6 mb-5>
              <v-card xs6 mb-5 p-10>
                <!-- we will just send a random user to it -->
                <!-- alongside our selected files -->

                <form action="fileupload" method="post" enctype="multipart/form-data">
                QR file:
                <input type="file" name="qr_file" id="qr_file">
                <br>
                <div id="file_container">
                  <p v-for="(item,index) in input_boxes" :key="index">
                    Answer file {{index+1}}:
                    <input type="file" @change="add_more_inputs" :name="item">
                  </p>
                </div>
                </form>
              </v-card>
            </v-flex>
          </v-layout>
        </v-container>
      </v-content>
    </v-app>
  </div>
  <script>
    new Vue({
      el: '#app',
      data: {
        //this app is aimed at complementing PHP shortcoming in TCExam.
        //PHP seems to be having a terrible time running zbarimg/ImageMagick as apache module
        //Although PHP CLI works fine in such cases where the apache type fails
        //We are now using JS to handle such shortcoming.
        output_of_external_command: null,
        input_boxes: []
      },
      methods: {
        add_more_inputs() {
          this.input_boxes.push("answer_file_" + this.input_boxes.length);
        }
      },
      created: function () {
        // `this` points to the vm instance
        // console.log('a is: ' + this.a)
        this.add_more_inputs();
      }
    })
  </script>
</body>

</html>